{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

    @package   local_excursions
    @copyright 2021 Michael Vangelovski
    @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}
{{!
    @template local_excursions/index_activity

    View template.
}}

{{#calentryonly}}
  <tr class="event" data-eventid={{id}}>
      <td>
        {{dayStart}}<small>{{dayStartSuffix}}</small> {{monyear}} {{timeendReadable}}
      </td>
      <td><strong>{{eventname}}</strong></td>
      <td>{{#assessmenturl}}<a target="_blank" href="{{assessmenturl}}">Link</a>{{/assessmenturl}} {{location}}</td>
      <td><div><img class="round userphoto" height="24" src="{{owner.photourl}}"> <span>{{owner.fullname}}</span></div></td>
      <td>Calendar entry only</td>
      <td>
        <div class="actions">
          <a class="btn btn-secondary" href="{{editurl}}">Edit</a>
        </div>
      </td>
    </tr>
{{/calentryonly}}
{{^calentryonly}}
  <tr data-id="{{id}}" class="activity {{#statushelper.isautosave}}is-autosave{{/statushelper.isautosave}}{{#statushelper.isdraft}}is-draft{{/statushelper.isdraft}}{{#statushelper.inreview}}in-review{{/statushelper.inreview}}{{#ispast}}past{{/ispast}}">
    <td class="cell">
      {{dayStart}}<small>{{dayStartSuffix}}</small> {{monyear}} {{timeendReadable}}
    </td>
    <td class="cell c-name"><strong>{{activityname}}</strong></td>
    <td class="cell c-location">{{#assessmenturl}}<a target="_blank" href="{{assessmenturl}}">Link</a>{{/assessmenturl}}{{location}}</td>
    <td class="cell c-staffincharge"><img class="round userphoto" height="24" title="{{staffinchargeinfo.fullname}}" src="{{{staffinchargeinfo.userphoto}}}"> {{staffinchargeinfo.fullname}}</td>
    <td class="cell c-status {{#statushelper.isdraft}}is-draft{{/statushelper.isdraft}}{{#statushelper.inreview}}in-review{{/statushelper.inreview}}">
        {{#statushelper.isautosave}}
            <span class="badge badge-secondary">
                {{#str}}status:autosave, local_excursions{{/str}}
            </span>
        {{/statushelper.isautosave}}
        {{#statushelper.isdraft}}
            <span class="badge badge-secondary">
                {{#str}}status:draft, local_excursions{{/str}}
            </span>
        {{/statushelper.isdraft}}
        {{#statushelper.inreview}}
            <span class="badge badge-warning">
                {{#str}}status:inreview, local_excursions, {{stepname}}{{/str}}
            </span>
            {{#iswaitingforyou}}
                <span class="badge badge-danger">
                    {{#str}}status:waitingforyou, local_excursions{{/str}}
                </span>
            {{/iswaitingforyou}}
        {{/statushelper.inreview}}
        {{#statushelper.isapproved}}
            <span class="badge badge-success">
                {{#str}}status:approved, local_excursions{{/str}}
            </span>
        {{/statushelper.isapproved}}
        {{#statushelper.iscancelled}}
            <span class="badge badge-danger">
                {{#str}}status:cancelled, local_excursions{{/str}}
            </span>
        {{/statushelper.iscancelled}}
    </td>
    <td class="cell c-actions lastcol">
      <div class="actions">
        <a class="btn btn-secondary" href="{{editurl}}">Edit</a>
      </div>
    </td>
  </tr>
{{/calentryonly}}