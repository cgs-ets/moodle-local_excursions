define(["jquery","core/log","core/ajax","core/str"],function(a,o,i,t){"use strict";function e(t){this.rootel=t}return e.prototype.main=function(){var n=this;n.rootel.on("click",".delete-activity",function(t){t.preventDefault();var e=a(this).closest("tr.activity").data("id");n.rootel.find('tr.activity[data-id="'+e+'"]').addClass("deleting"),i.call([{methodname:"local_excursions_formcontrol",args:{action:"delete_activity",data:e},done:function(t){n.rootel.find('tr.activity[data-id="'+e+'"]').remove()},fail:function(t){o.error("local_excursions/index: failed to delete activity."),o.debug(t)}}])}),n.rootel.on("change","select.page-select",function(t){var e=a(this).find(":selected").val(),o=new URLSearchParams(window.location.search);o.set("nav",e),n.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+o.toString()}),n.rootel.on("click","a.page-link",function(t){t.preventDefault();t=new URLSearchParams(window.location.search);t.set("nav",a(this).data("nav")),n.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+t.toString()}),n.rootel.on("change","select.filter-select",function(t){var e=a(this).find(":selected").val(),o=new URLSearchParams(window.location.search);o.set(a(this).attr("name"),e),n.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+o.toString()})},{init:function(){o.debug("local_excursions/index: initializing");var t=a("#page-content");t.length?new e(t).main():o.error("local_excursions/index: #page-content not found!")}}});