define(["jquery","core/log","core/ajax","core/str"],function(o,n,a,i){"use strict";function t(i){this.rootel=i}return t.prototype.main=function(){var e=this;e.rootel.on("click",".delete-activity",function(i){i.preventDefault();var t=o(this).closest("tr.activity").data("id");e.rootel.find('tr.activity[data-id="'+t+'"]').addClass("deleting"),a.call([{methodname:"local_excursions_formcontrol",args:{action:"delete_activity",data:t},done:function(i){e.rootel.find('tr.activity[data-id="'+t+'"]').remove()},fail:function(i){n.error("local_excursions/index: failed to delete activity."),n.debug(i)}}])})},{init:function(){n.debug("local_excursions/index: initializing");var i=o("#page-local-excursions-index");i.length?new t(i).main():n.error("local_excursions/index: #page-local-excursions-index not found!")}}});