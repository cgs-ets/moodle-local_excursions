define(["jquery","core/log","core/ajax","core/str"],function(n,o,i,e){"use strict";function t(e){this.rootel=e}return t.prototype.main=function(){var a=this;a.rootel.on("click",".delete-activity",function(e){e.preventDefault();var t=n(this).closest("tr.activity").data("id");a.rootel.find('tr.activity[data-id="'+t+'"]').addClass("deleting"),i.call([{methodname:"local_excursions_formcontrol",args:{action:"delete_activity",data:t},done:function(e){a.rootel.find('tr.activity[data-id="'+t+'"]').remove()},fail:function(e){o.error("local_excursions/index: failed to delete activity."),o.debug(e)}}])}),a.rootel.on("change","select.page-select",function(e){var t=n(this).find(":selected").val(),o=new URLSearchParams(window.location.search);o.set("nav",t),a.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+o.toString()}),a.rootel.on("click","a.page-link",function(e){e.preventDefault();e=new URLSearchParams(window.location.search);e.set("nav",n(this).data("nav")),a.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+e.toString()}),a.rootel.on("change","select.filter-select",function(e){var t=n(this).find(":selected").val(),o=new URLSearchParams(window.location.search);o.set(n(this).attr("name"),t),a.rootel.find(".excursions-overlay").addClass("active"),window.location.href="//"+location.host+location.pathname+"?"+o.toString()})},{init:function(){o.debug("local_excursions/index: initializing");var e=n("#page-local-excursions-index");e.length?new t(e).main():o.error("local_excursions/index: #page-local-excursions-index not found!")}}});